<h1>Reddit</h1>
<% if @posts.any? %>
	<% @posts.each do |post| %>
		<%= link_to post.title, post.url %>
		<%= "Points: #{post.likes.count}" %>
		<%= link_to('Like', post_like_path(post), method: :post) %>
		<%= link_to('Dislike', post_like_path(post), method: :delete) %>
		<%= "Posted by #{post.user.username}"%><br>
		<% if post.categories.all.any? %>
			categories: 
			<% post.categories.all.each do |category| %>
				<%= "#{category.name} "%>
			<% end %><br>
		<% end %>
			<% if user_signed_in? && request.path != '/posts' %>
			<%= link_to('Edit', edit_user_post_path(current_user, post)) %>
			<%= link_to('Delete', user_post_path(current_user, post), method: :delete )%>
			<% end %>
			<ul class='post_comments'>
				<%= render 'comment_form', post: post %>
				<% post.comments.reverse.each do |comment| %>
					<li> <%= "#{comment.thoughts}" %>
						<%= "- Posted #{time_ago_in_words(comment.created_at)} ago - by #{comment.user.username}"%>
						</li>
						<hr>
				<% end %>
			</ul>
	<% end %><br>
<% else %>
	<p>No posts have been added</p>
<% end %>
<%= link_to 'New post', new_post_path %>