<h1>Reddit posts</h1>
<% if @posts.any? %>
	<% @posts.each do |post| %>
		<%= link_to post.title, post.url %>
		<%= "Points: #{post.total_points}" %>
		<%= link_to('Like', post_like_path(post), method: :post, class: "glyphicon glyphicon-chevron-up") %>
		<%= link_to('Dislike', post_like_path(post), method: :delete, class: "glyphicon glyphicon-chevron-down") %>
		
		<% if user_signed_in? && !request.path.match(/\A\/user\/\d{1,}\/posts/).nil? %>
		<%= link_to('Edit', edit_user_post_path(current_user, post), class: "glyphicon glyphicon-pencil") %>
		<%= link_to('Delete', user_post_path(current_user, post), method: :delete, class: "glyphicon glyphicon-trash")%>
		<% end %>
		<br>
		<span class="share"> Share: <%= social_share_button_tag(post.title, :url => post.url) %> </span>
		<%= "Posted #{time_ago_in_words(post.created_at)} ago - by #{post.user.username}"%><br>

		<% if post.categories.all.any? %>
			categories: 
			<% post.categories.all.each do |category| %>
				<%= "#{category.name} "%>
			<% end %><br>
		<% end %>

			<ul class='post_comments'>
				<%= render 'comment_form', post: post %>
				<% post.comments.reverse.each do |comment| %>
					<li class="comment"> <%= "#{comment.thoughts}" %>
						<%= "- Posted #{time_ago_in_words(comment.created_at)} ago - by #{comment.user.username}"%>
						<%= "Points: #{comment.total_points}" %>
						<%= link_to('Like', comment_like_comment_path(comment), method: :post) %>
						<%= link_to('Dislike', comment_like_comment_path(comment), method: :delete) %>
						</li>
						<hr>
				<% end %>
			</ul>
	<% end %><br>
<% else %>
	<p>No posts have been added</p>
<% end %>